<template name='OEMPartner'>
    <div class="ui segment">
        <div class="ui icon message">
            <i class="info circle icon"></i>
            <div class="content">
                <div class="header">
                    Let's start generating apps
                </div>
                <p>Select the "my first template" app on the right. A copy will be made for each selected template and published in the stream for that customer</p>
            </div>
        </div>
    </div>
    <div class="ui segment">
        {{> simulateUserLogin}}
    </div>
    <div class="ui segment">
        <!-- <i class="users icon"></i> -->
        <!--  <div class="ui left input">
            <form class="new-customer">
                <input type="text" name="text" placeholder="Add new customer" />
            </form>
        </div> -->
        <a class="ui labeled icon button" href="{{pathFor 'users'}}"> <i class="edit icon "></i>1: Insert Customers</a>
        <!-- APP GENERATION BUTTON -->
        <div class="ui buttons">
            <button class="ui labeled icon button resetEnvironment">
                <i class="undo icon "></i> Initialize demo
            </button>
            <div class="or"></div>
            <div class="ui buttons">
                <div class="ui {{loading}} positive button generateStreamAndApp"><i class="play icon "></i> 3: Generate</div>
                <!-- {{#unless loading}} -->
                <div class="ui positive floating dropdown icon button">
                    <i class="dropdown icon"></i>
                    <div class="menu">
                        <div class="item insertDummyCustomers"><i class="edit icon "></i> Insert dummy customers</div>
                        <div class="item deleteAllCustomers"><i class="delete icon "></i> Delete all customers</div>
                        <div class="item toggleAllCustomers"><i class="refresh icon"></i> Toggle the selected customers</div>
                    </div>
                </div>
                <!-- {{/unless}} -->
            </div>
        </div>
        {{#if noCustomers}}
        <div class="ui icon message">
            <img class="icon" src="images/customers.png">
            <div class="content">
                <div class="header">
                    <h4>No customers</h4>
                </div>
                <ul>
                    <li>You have no customers in your shop.</li>
                    <li>Let's insert some by hand, in the add new customer box above or <a href="{{pathFor 'users'}}"> here </a> if you also want to test single sign on </li>
                    <li>Or press the blue arrow, next to the generate button, to insert some dummy customers</li>
                </ul>
            </div>
        </div>
        {{else}}
        <div class="ui icon message">
            <img class="icon" src="images/customers.png">
            <div class="content">
                <div class="header">
                    <h4>{{NrCustomers}} Customers stored in the database of your SaaS platform </h4>
                </div>
            </div>
        </div>
        <table class="ui celled striped table">
            <thead>
                <tr>
                    <th>Customer</th>
                    <th>Delete customer</th>
                    <th>Generate Stream</th>
                </tr>
            </thead>
            <tbody>
                {{#each customers}} {{> customer}} {{/each}}
            </tbody>
        </table>
        {{/if}} {{#if noTemplateApps}}
        <div class="ui icon message">
            <img class="icon" src="images/app.png">
            <div class="content">
                <div class="header">
                    <h4>No template apps</h4>
                </div>
                <p>Please select the Qlik Sense App (on the right) you would like to use as a basis template. We will create a copy and publish it into the "customer name" stream for each of your selected customers</p>
            </div>
        </div>
        {{else}}
        <div class="ui icon message">
            <img class="icon" src="images/app.png">
            <div class="content">
                <div class="header">
                    <h4>Template apps</h4>
                </div>
                <p>We will create a customer stream and publish a copy of each template app</p>
            </div>
        </div>
        <table class="ui celled table">
            <thead>
                <tr>
                    <th>App (QVF)</th>
                    <th>Don't mark as template</th>
                </tr>
            </thead>
            <tbody>
                {{#each templateApps}}
                <tr>
                    <td> <a href={{linkToApp}} target=_blank> {{name}} </a></td>
                    <td class="removeTemplateApp"><i class="remove circle icon"></i></td>
                </tr>
                {{/each}}
            </tbody>
        </table>
        {{/if}}
    </div>
</template>
