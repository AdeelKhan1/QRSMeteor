<template name="insertCustomerButtons">
    <div class="ui small buttons">
        <a href="{{pathFor 'users'}}" class="ui button insertNewCustomer">Insert customers</a>
        <div class="or"></div>
        <a href="#" class="ui positive button insertDummyCustomers">Use fictitious customers</a>
    </div>
</template>
<template name='users'>
    {{> stepsRow}}
    <div class="ui two column stackable grid">
        <div id="insertCustomer" class="ui modal">
            {{> insertCustomer}} {{> modalRefresher}}
        </div>
        <div class="row">
            <div class="column">
                <h4 class="ui dividing header">
                    Your Saas Platform: Customers
                </h4>
                <!-- <div class="ui segment"> -->
                {{#if noCustomers}}
                <div class="ui icon message">
                    <img class="icon" src="images/customers.png">
                    <div class="content">
                        <div class="header">
                            <h4>No customers</h4>
                        </div>
                        <p>Please insert some customers.</p>
                    </div>
                </div>
                {{> insertCustomerButtons}} {{else}}
                <div class="ui icon message">
                    <img class="icon" src="images/customers.png">
                    <div class="content">
                        <div class="header">
                            Customers in your SaaS platform
                        </div>
                        <p>Below you will find the customers you have entered in the local Mongo Database of your SaaS plaform.
                            <!-- Based on "this table" we can create streams, apps or whatever we like in Qlik Sense via the Qlik Sense repository (QRS) and the Engine API. -->Press a customer name to update.</p>
                    </div>
                </div>
                <table class="ui simple table">
                    <thead>
                        <tr>
                            <th>Customer</th>
                            <th>Delete customer</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each customers}}
                        <tr class="customer-row {{active}}">
                            <td class="{{ribbon}}">
                                {{name}}
                            </td>
                            <td class='delete'><i class="remove circle icon"></i></td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
                <div class="ui buttons">
                    <a href="#" class="ui button insertNewCustomer">Insert new customer</a>
                    <div class="or"></div>
                    <div class="ui positive button backToGeneration"><i class="play icon "></i> Go to step 2</div>
                </div>
                {{/if}}
                <!-- </div> -->
            </div>
            <div class="column">{{#unless disableButtons}}
                <h4 class="ui dividing header">
                      <!-- <i class="tag icon"></i> -->
                      Update
                  </h4>
                <!-- <div class="ui"> -->
                {{#autoForm id="afUpdateDemo" omitFields="users.$.currentlyLoggedIn" type=formType collection=Customers doc=selectedCustomerDoc autosave=autoSaveMode}} {{> afQuickField name='name'}}
                <fieldset>
                    {{> afQuickField name='users'}}
                </fieldset>
                {{/autoForm}}
                <!-- </div> -->
                {{/unless}} </div>
        </div>
    </div>
</template>
<template name="modalRefresher">
</template>
<template name="insertCustomer">
 {{> sAlert}}
    {{#autoForm collection=Customers id="insertCustomerForm" omitFields="users.$.currentlyLoggedIn" type="insert"}}
    <fieldset>
        {{> afQuickField name='name'}} {{> afQuickField name='users'}}
    </fieldset>
    <div class="ui right floated buttons">
        <button type="submit" class="ui positive button saveNewCustomer">
            <i class="edit icon "></i> Insert customer</button>
        <div class="or"></div>
        <button type="submit" class="ui button closeInsertModal">
            close</button>
    </div>
    {{/autoForm}}
</template>
