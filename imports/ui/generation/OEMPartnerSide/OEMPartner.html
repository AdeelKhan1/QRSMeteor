<template name='OEMPartner'>
    <div class="ui icon message">
        <img class="icon" src="images/intro.png">
        <div class="content">
            {{#if freshEnvironment}}
            <div class="header">
                Step 1: Let's start to setup the SaaS demo environment
            </div>
            <p>
                First insert some customers with users in your SaaS platform.
                <ul>
                    <li>You can use these customers later on to generate streams and apps. </li>
                    <li>You can use the users to test the single sign and our layered approach to governed <a href="#" class="selfservice">self service</a> in step 4.</li>
                </ul>
            </p>
            {{/if}} {{#if readyToSelectTemplate}}
            <div class="header">
                Step 2: Select a template app
            </div>
            <p>
                Which apps should be made available for your customers? <!-- In step 3 we will create a copy of this template for each of your selected customers. (Also called SaaS provisioning). --> 
                {{# each appsInTemplateStream}} {{> templateCheckBox}} {{/each}}
            </p>
            {{/if}} {{#if readyToGenerate}} {{> step3}} {{/if}} {{#if templateButNoCustomer}}
            <div class="header">
                Customers
            </div>
            <p>
                You already selected a template, but please re-insert your customers.
            </p>
            {{/if}} {{#if readyToTestSSO}} {{> step4}} {{/if}} {{#if loading}}
            <div class="header">
                API communication is in progress...
            </div>
            <p>Your SaaS platform is now sending API calls to the Qlik Sense. Below you will find a summary of the actions we have automated. See more info about what we do here in the <a href="{{pathFor 'APILogs'}}" target="_blank">API documentation</a>.</p>
            {{> reactiveTable collection=restrictedApiLogs settings=RESTCallSettings}} {{/if}}
        </div>
    </div>
    {{#if readyToTestSSO}} {{> simulateUserLogin}} {{/if}} {{> mainButtons}} {{#if or noCustomers templateButNoCustomer}}
    <div class="ui icon message">
        <img class="icon" src="images/customers.png">
        <div class="content">
            <div class="header">
                <h4>No customers</h4>
            </div>
            <p>You have resetted the demo environment, and therefore this demo now simulates the first day of your SaaS platform. As a first step we need to insert some customers, or use the dummy customers (Sunny and Cloudy Petrol) we created for you.
            </p>
            <div class="ui fluid mini buttons">
                <a href="{{pathFor 'users'}}" class="ui button">Insert customers</a>
                <div class="or"></div>
                <a href="#" class="ui button insertDummyCustomers">Use dummy customers and template app</a>
            </div>
        </div>
    </div>
    <!-- {{else}} {{> customerOverview}}  -->
    <!--   {{#if readyToSelectTemplate}}
    <div class="ui icon message">
        <img class="icon" src="images/app.png">
        <div class="content">
            <div class="header">
                <h4>No template apps</h4>
            </div>
            <p>Please select an app in the templates stream (on the right) which you would like to use as a basis template. We will create a copy and publish it into the "customer name" stream for each of your selected customers</p>
        </div>
    </div>
    {{else}}
    {{> templateOverview}}{{/if}} -->{{/if}}
</template>

<template name="templateCheckBox">
    <div class="field">
        <div class="ui toggle checkbox template">
            <input type="checkbox" {{checked}} name="templateSelector" >
            <label>{{name}}</label>
        </div>
    </div>
</template>
<template name="templateOverview">
    <div class="ui icon message">
        <img class="icon" src="images/app.png">
        <div class="content">
            <div class="header">
                <h4>{{NrTemplates}} Selected template app(s)</h4>
            </div>
            <p>We will create a "customer name" stream, replace the script, reload and publish a copy of each template app for each of your customers</p>
        </div>
    </div>
    <div class="ui styled fluid accordion">
        <div class="title">
            <i class="dropdown icon"></i> View selected templates
        </div>
        <div class="content">
            <table class="ui celled table">
                <thead>
                    <tr>
                        <th>App (QVF)</th>
                        <th>Don't mark as template</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each templateApps}}
                    <tr>
                        <td> <a href={{linkToApp}} target=_blank> {{name}} </a></td>
                        <td class="removeTemplateApp"><i class="remove circle icon"></i></td>
                    </tr>
                    {{/each}}
                </tbody>
            </table>
        </div>
    </div>
</template>


<!-- <div class="ui floating basic dropdown icon button">
        <i class="dropdown icon"></i>
        <div class="menu">
            <div class="item insertDummyCustomers"><i class="edit icon "></i> Insert dummy customers</div>
            <div class="item deleteAllCustomers"><i class="delete icon "></i> Delete all customers</div>
            <div class="item toggleAllCustomers"><i class="refresh icon"></i> Toggle the selected customers</div>
        </div>
    </div> -->