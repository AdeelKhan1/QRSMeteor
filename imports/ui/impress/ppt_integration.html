<template name="ppt_integrationMain">
    <div class="ui black big launch right attached fixed button" style="background-color: #545454">
        <i class="content icon"></i>
        <span class="text">Qlik Sense Engine API Slide generator</span>
    </div>
    <div class="ui sidebar" style="width: 600px">
        <iframe src='{{appURL}}' class="frame" style="margin-top: 45px"></iframe>
    </div>
    <div class="pusher">
        <div class="twelve wide column">
            <iframe src="{{pathFor 'ppt_integration'}}" class="frame"></iframe>
        </div>
    </div>
</template>
<template name="ppt_integration">
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
    <div id="impress">
         <div class="step slide" data-x="-4000" data-z="90" data-scale="19" data-rotate="300">
            <h1 style="margin-left: 160px" class="ui header">
                <div class="content">
                    Agenda for the workshop
                </div>
            </h1>
            <img class="ui centered image" style="margin-top: 60px" src="images/support workshop agenda.png">
        </div>
        {{#if mainTopics}} {{#each mainTopics }} 
        {{#if chapterSlide this}}
       <div class="z {{stepVisible this}} slide" data-x="{{XValue @index}}" data-y="-1500" data-z="1500" style="visibility: {{visibility this}};">
            <q>{{this}}</q>
        </div> 
        <!-- {{> pageBreaker}} -->
        {{else}}
        <div class="z {{stepVisible this}} slide" data-x="{{XValue @index}}" data-y="-1500" data-rotate-x="-90" data-z="-1500" style="visibility: {{visibility this}};">
            <h2 style="margin-left: 160px" class="ui header">
                <div class="content">
                    {{level 1}}
                    <div class="sub header" style="font-size: 1.2em">{{level 2}}</div>
                </div>
            </h2>
            <div class="ui list" style="margin-top: 60px">
                <!-- ?prettify lang=javascript linenums=true? -->
                {{#each item in itemsOfLevel 3}} {{{formatted item}}} {{/each}}
            </div>
        </div>
        {{/if}}
        {{/each}} {{else}} {{> errorPresentation}} {{/if}}
    </div>
    <div class="ui {{#if loading}} active {{/if}} dimmer">
        <div class="ui indeterminate text loader">Connecting to Qlik Sense Engine API to get all data for the presentation.</div>
    </div>
</template>
<template name="pageBreaker">
</template>
<template name="errorPresentation">
    <div class="ui negative message">
        <i class="close icon"></i>
        <div class="header">
            We're sorry we can't create your presentation...
        </div>
        <ul class="list">
            <li>Make new selection</li>
            <li>Refresh your browser</li>
            <li>Issue can also occur with a slow internet connection or computer.</li>
        </ul>
    </div>
</template>
<!-- {{> Template.dynamic template="dynamicSlide" data=row}}        -->
<!-- <tr>
        {{#each row in topics }}
            {{#each cell in row}}
            <td> {{cell.qText}} </td> 
            {{/each}}
        </tr> 
        {{/each}}-->
