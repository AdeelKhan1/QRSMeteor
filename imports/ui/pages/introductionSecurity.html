<template name="introductionSecurity">
    <div class="ui container">
        <div class="ui very padded segment">
            <div class="ui middle aligned stackable grid container">
                <div class="row">
                    <div class="seven wide column">
                        <h3 class="ui header">Integrated security flow</h3>
                        <p>Your goal is to create and provide within a multi-tenant SaaS platform environment - embedded analytics – with your core application(s) where each of your customers would see and use only their data for their analytic needs. It’s possible for each customer to have a more fine grained authorization structure. As an example, it is possible to provide authorizations for a specific department or country within a dashboard. In our demonstration we will take you step by step through the integration process flow and you will see a simple solution in which both of our fictitious users, Peter and John, go to the same website, but see different things based on their authorizations. Qlik Sense makes this possible because it uses a dynamic attribute-based security approach in which we re-use all the pre-existing users and roles from your SaaS platform. This ensures Qlik Sense stays automatically in sync and avoids the overhead of double maintenance.</p>
                        <div class="ui mini buttons">
                                    <a href="http://knsv.github.io/mermaid/live_editor/#/view/c2VxdWVuY2VEaWFncmFtCkJyb3dzZXItPj5NZXRlb3Igd2ViIGludGVncmF0aW9uIGRlbW86IFVzZXIgbG9ncyBpbiBpbnRvIE1ldGVvciAKQnJvd3Nlci0-PiBQcm94eTogSUZyYW1lIHRyaWVzIHRvIG9wZW4gU2Vuc2UgY29udGVudCB2aWEgbGluayB0aGF0IGNvbnRhaW5zIC9wcm94eS8KUHJveHktPj5NZXRlb3IgU1NPIGNsaWVudDogUmVkaXJlY3QgcmVxdWVzdCB0byB3ZWJwYWdlIG9uIHRoZSBjbGllbnQgKGNsaWVudCBzaWRlIHJvdXRlKS4KCk5vdGUgcmlnaHQgb2YgUHJveHk6IFByb3h5IGFsc28gaW5jbHVkZXMgdGFyZ2V0SWQgPSA8SUQgZm9yIHRoZSBvcmlnaW5hbCBVUkkgdGhhdCB0aGUgdXNlciB0cmllcyB0byBhY2Nlc3M-LCBhbmQgcHJveHlSZXN0VXJpID0gPHRoZSBVUkkgd2hlcmUgdGhlIGF1dGhlbnRpY2F0aW9uIG1vZHVsZSBjYW4gYWNjZXNzIHRoZSBSRVNUIEFQST4KTWV0ZW9yIFNTTyBjbGllbnQtPk1ldGVvciBzZXJ2ZXI6ICBjbGllbnQgY2FsbHMgKHVzZXIgYXdhcmUpIHNlcnZlciBzaWRlIG1ldGhvZApOb3RlIHJpZ2h0IG9mIE1ldGVvciBzZXJ2ZXI6IFNpbmNlIHRoZSB1c2VyIGlzIGFscmVhZHkgbG9nZ2VkIGluIGluIE1ldGVvciwgd2UgY2FuIHJlcXVlc3QgdGhlIHVzZXJJRCBhbmQgZ3JvdXAgbWVtYmVyc2hpcCBmcm9tIHRoZSBNZXRlb3Igc2Vzc2lvbi4gVHJ1c3QgbWVjaGFuaXNtOiBTZXJ2ZXIgaW1wb3J0ZWQgUWxpayBTZW5zZSBjbGllbnQgY2VydGlmaWNhdGUuCk1ldGVvciBzZXJ2ZXItPj5RUFMgQVBJOiBSZXF1ZXN0IHRpY2tldCBhdCBRUFMgQVBJLCBwcm92aWRlIHRoZSB1c2VySWQgYW5kIGdyb3VwcyBpbiBKU09OLgpOb3RlIHJpZ2h0IG9mIE1ldGVvciBzZXJ2ZXI6IE9wdGlvbmFsbHkgaW5jbHVkZSB0aGUgcmVkaXJlY3QgcGFyYW1ldGVyIHRvIGZvcndhcmQgdGhlIHVzZXIgYmFjayB0byB0aGUgcGFnZSBoZSBpbml0aWFsbHkgdHJpZWQgdG8gYWNjZXNzLgpRUFMgQVBJLS0-Pk1ldGVvciBzZXJ2ZXI6IFFQUyBBUEkgcmV0dXJucyBhIHRpY2tldCBudW1iZXIgKGFuZCBwb3NzaWJseSByZWRpcmVjdCBVUkwpIHdoaWNoIHlvdSBoYXZlIHRvIGFwcGVuZCBpbiB0aGUgVVJMIApNZXRlb3Igc2VydmVyLS0-PiBNZXRlb3Igd2ViIGludGVncmF0aW9uIGRlbW86IENyZWF0ZSBhIHJlZGlyZWN0IFVSTCB3aGljaCB0aGUgY2xpZW50IGNvZGUgY2FuIHB1dCBpbiB0aGUgYnJvd3NlciBVUkwgYmFyLiAKTm90ZSByaWdodCBvZiBNZXRlb3Igd2ViIGludGVncmF0aW9uIGRlbW86IENsaWVudCBzaWRlIGNvZGUsIHJlcGxhY2VzIHRoZSB1cmwgaW4gYnJvd3NlciwgYW5kIGZvcndhcmRzIHRoZSB1c2VyIHRvIFFsaWsgU2Vuc2UuIFVzZXIgbm93IHJlY2VpdmVzIGEgUWxpayBTZW5zZSBzZXNzaW9uIGNvb2tpZSAoc2VlIHZpcnR1YWwgcHJveHkgY29uZmlnKSwgYW5kIGFuZCBzdWNoIHNpbmdsZSBzaWduIG9uIGlzIGNvbmZpZ3VyZWQu" target="_blank" class="ui button">Sequence diagram ticketing flow in this demo</a>
                                </div>
                    </div>
                    <div class="nine wide right floated column">
                        <img class="ui fluid image" src="images/only full integration flow.gif">
                    </div>
                </div>
            </div>
        </div>
        <div class="ui very padded segment">
            <div class="ui middle aligned stackable grid container">
                <h3 class="ui header">Flexible attribute based access control</h3>
                <div class="row">
                    <div class="three wide left floated column">
                        <img class="ui fluid image" src="images/id_big.png">
                    </div>
                    <div class="ten wide column">
                        <h4 class="ui header">Authentication - Single Sign on using tickets (tokens)</h4> We re-use your existing way to authenticate the users. We will insert a little piece of code inside your existing "security module". In this module you already know who the user is (authentication) and what his rights are (authorization). The only thing we need to do is create a trust relationship between your server and the new Qlik Sense server (via a SSL certificate exchange). And send this info about the user (userId, group membership) in a JSON object to Sense (we call this ticketing).
                        <h4 class="ui header">Authorization</h4> Based on the userId and group membership streams (a way to group apps, like HR/Finance), apps, sheets (all called "resources" in our rule based security model) are shown or not. Let's say we start simple and each customer can only view their own dashboards. Since we gave each customer its own stream we can grant access if the name of the stream (your company name) equals the the name of the company we received from your website in the ticket. We can all control this by adding 1 row of security configuraton: User.group = Stream.name.
                    </div>
                </div>
                <div class="row">
                    <p>
                        <div class="center aligned column">
                            <div class="center aligned column">
                                <div class="ui mini buttons">
                                    <a href="{{doc_securtityIntegration}}" target="_blank" class="ui button">Read more</a>
                                    <div class="or"></div>
                                    <a class="ui button" href="/images/QlikSense%20TopologiesV0_18.pdf" target="_blank">Topology sheet</a>
                                    <div class="or"></div>
                                    <a href="#" class="ui button mindMapSecurity">Mindmap</a>
                                </div>
                            </div>
                        </div>
                    </p>
                </div>
                <div class="row">
                    <div class="ui accordion">
                        <div class="title">
                            <i class="dropdown icon"></i> Or see the videos...
                        </div>
                        <div class="content">
                            <p class="transition hidden">
                                <div class="ui grid">
                                    <div class="two column row">
                                        <div class="column">
                                            <h4 class="ui header">Overview of the web and security flow (1M)</h4>
                                            <div class="ui embed" data-url='{{URL_Youtube_integrated_flow}}' data-placeholder="/images/qlik sense integrated security flow.png"></div>
                                            <div class="item">
                                                <div class="content">
                                                    <a class="header">Contents</a>
                                                    <div class="meta">
                                                        <span></span>
                                                    </div>
                                                    <div class="description">
                                                        <p>This perspective provides more details on the technical integration flow.
                                                        </p>
                                                    </div>
                                                    <div class="extra">
                                                        Let’s walk through it: A user logs in into your multi-tenant SaaS application platform. Your platform contains some Qlik Sense information in an IFrame or DIV tag. The proxy intercepts the request and redirects the user to the authentication module of your SaaS platform. Your platform knows the identity and group membership of the user and It requests an access ticket for this user. We redirect the user’s request back to the proxy, but now with the ticket number appended to the URL. Qlik Sense validates the request and will set a session cookie. Now the authentication is complete and Qlik Sense will evaluate the security rules and will only present the authorized streams and apps to the user.
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="column">
                                            <h4 class="ui header">Security overview</h4>
                                            <div class="ui embed" data-url='{{URL_Youtube_security_introduction}}' data-placeholder="/images/introVideoSecurity.png"></div>
                                            <div class="item">
                                                <div class="content">
                                                    <a class="header">Contents</a>
                                                    <div class="meta">
                                                        <span></span>
                                                    </div>
                                                    <div class="description">
                                                        <p>In a quick overview you will see the key components for securing a Qlik Sense integration. Your goal is to create within a multi-tenant SaaS platform environment - embedded analytics - within your core application(s) where each of your customers would see and use only their data. It’s possible for each customer to have a more fine grained authorization structure. As an example, it is possible to provide authorizations for a specific department or country within a dashboard. Ultimately you will see a simple solution in our demonstration in which both of our fictitious users, Peter and John, go to the same website, but see different things based on their authorizations. Qlik Sense makes this possible because it uses a dynamic attribute-based security approach in which we re-use all the pre-existing users and roles from your SaaS platform. This ensures Qlik Sense stays automatically in synch and avoids the overhead of double maintenance.
                                                        </p>
                                                    </div>
                                                    <div class="extra">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="two column row">
                                        <div class="column">
                                            <h4 class="ui header">Security deep dive</h4>
                                            <div class="ui embed" data-url='{{URL_Youtube_security_deepDive}}' data-placeholder="/images/DeepDiveVideoSecurity.png"></div>
                                            <div class="item">
                                                <div class="content">
                                                    <a class="header">Contents</a>
                                                    <div class="meta">
                                                        <span></span>
                                                    </div>
                                                    <div class="description">
                                                        <p>A deep dive introduction in which you see the complete authentication and authorization flow. This includes real code examples and security rules.</p>
                                                    </div>
                                                    <div class="extra">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {{> modalMindMapSecurity}}
</template>

<template name="modalMindMapSecurity">
    <div class="ui modal mindMapSecurity">
        <div class="ui icon message">
            <img class="icon" src="images/API.png">
            <div class="content">
                <div class="header">
                    <h4>Mindmap of the Qlik Sense OEM security model</h4>
                </div>
                <p>This is a summary of a common approach to embed Qlik Sense security in your SaaS platform.</p>
            </div>
        </div>
        <div class="ui divider"></div>
        <div class="ui one column centered grid">
            <div class="column centered">
                <img class="ui fluid image" src="/images/mindMapSecurityIntegration.png">
            </div>
        </div>
        <div class="actions">
            <div class="ui positive right labeled icon button">
                I got it...
                <i class="checkmark icon"></i>
            </div>
        </div>
    </div>
</template>
