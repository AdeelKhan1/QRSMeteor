<template name="architecture">
    <div class="ui text container">
        <h3>Integrated architecture</h3> {{>introductionArchitecturePage}}
    </div>
    <div class="sixteen wide column">
        <div class="ui segment">
            <h4>Videos</h4>
            <div class="ui three column centered grid">
                <div class="column"> {{> introVideoArchitecture}}</div>
                <div class="column"> {{> introVideoArchitectureMike}}</div>
                <div class="column"> {{> introVideoArchitectureMarcus}}</div>
            </div>
        </div>
        <div class="ui segment">
            <h3>Integrated architecture diagram</h3>
            <p> In the picture below you will find all integration aspects together in 1 overview for a typical SaaS provisioning architecture, in which we have:
                <ul>
                    <li>Your SaaS platform's server</li>
                    <li>Qlik Sense server</li>
                    <li>A database per customer</li>
                    <li>A master configuration database</li>
                    <li>Your current API "broker"</li>
                </ul>
            </p>
            <img class="ui fluid image" src="images/integratedArchitecture.png">
        </div>
    </div>
</template>
<template name="introductionArchitecturePage">
    <!--     <h4> Qlik Sense architecture and deployment</h4>
-->
    <p> The integration of two software platforms entails multiple considerations. Each platform has its own nuances. In our approach here , we deconstruct our integration approach into the following categories: dashboard, data, security, web, APIs and architecture.</p>
    <!--     <img class="ui large centered image" src="images/simple sequence diagram flow with security.png">
 -->
    <svg id="mermaidChart112" width="100%" xmlns="http://www.w3.org/2000/svg" height="100%" style="max-width:750px;" viewBox="-50 -10 750 603">
        <style type="text/css" title="mermaid-svg-internal-css">
        /*  */
        
        *,
        ::before,
        ::after {
            box-sizing: inherit;
        }
        
        .actor {
            stroke: rgb(204, 204, 255);
            fill: rgb(226, 236, 255);
        }
        
        text.actor {
            fill: black;
            stroke: none;
            font-size: 12px;
        }
        
        .actor-line {
            stroke: grey;
        }
        
        .messageLine0 {
            stroke-width: 1.5;
            stroke: black;
        }
        
        .messageLine1 {
            stroke-width: 1.5;
            stroke: black;
        }
        
        #arrowhead {
            fill: black;
        }
        
        .messageText {
            fill: black;
            stroke: none;
            font-size: 12px;
        }
        
        .note {
            stroke: rgb(204, 204, 255);
            fill: rgb(255, 245, 173);
        }
        
        .noteText {
            fill: black;
            stroke: none;
            font-size: 12px;
        }
        
        .actor {
            stroke: rgb(204, 204, 255);
            fill: rgb(236, 236, 255);
        }
        
        text.actor {
            fill: black;
            stroke: none;
        }
        
        .actor-line {
            stroke: grey;
        }
        
        .messageLine0 {
            stroke-width: 1.5;
            stroke: rgb(51, 51, 51);
        }
        
        .messageLine1 {
            stroke-width: 1.5;
            stroke: rgb(51, 51, 51);
        }
        
        #arrowhead {
            fill: rgb(51, 51, 51);
        }
        
        #crosshead path {
            fill: rgb(51, 51, 51) !important;
            stroke: rgb(51, 51, 51) !important;
        }
        
        .messageText {
            fill: rgb(51, 51, 51);
            stroke: none;
        }
        
        .note {
            stroke: rgb(170, 170, 51);
            fill: rgb(255, 245, 173);
        }
        
        .noteText {
            fill: black;
            stroke: none;
            font-family: "trebuchet ms", verdana, arial;
            font-size: 14px;
        }
        
        text {
            font-family: "trebuchet ms", verdana, arial;
            font-size: 14px;
        }
        /*  */
        </style>
        <g></g>
        <g>
            <line id="actor336" x1="75" y1="5" x2="75" y2="592" class="actor-line" stroke-width="0.5px" stroke="#999"></line>
            <rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect>
            <text x="75" y="37.5" class="actor" style="text-anchor: middle;">User</text>
        </g>
        <g>
            <line id="actor337" x1="275" y1="5" x2="275" y2="592" class="actor-line" stroke-width="0.5px" stroke="#999"></line>
            <rect x="200" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect>
            <text x="275" y="37.5" class="actor" style="text-anchor: middle;">Your SaaS platform</text>
        </g>
        <g>
            <line id="actor338" x1="475" y1="5" x2="475" y2="592" class="actor-line" stroke-width="0.5px" stroke="#999"></line>
            <rect x="400" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect>
            <text x="475" y="37.5" class="actor" style="text-anchor: middle;">Qlik Sense</text>
        </g>
        <defs>
            <marker id="arrowhead" refX="5" refY="2" markerWidth="6" markerHeight="4" orient="auto">
                <path d="M 0,0 V 4 L6,2 Z"></path>
            </marker>
        </defs>
        <defs>
            <marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4">
                <path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path>
                <path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path>
            </marker>
        </defs>
        <g>
            <text x="175" y="93" class="messageText" style="text-anchor: middle;">browse</text>
            <line x1="75" y1="100" x2="275" y2="100" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line>
        </g>
        <g>
            <text x="375" y="128" class="messageText" style="text-anchor: middle;">Get data/charts</text>
            <line x1="275" y1="135" x2="475" y2="135" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line>
        </g>
        <g>
            <rect x="300" y="145" fill="#EDF2AE" stroke="#666" width="150" height="162" rx="0" ry="0" class="note"></rect>
            <text x="316" y="173" fill="black" class="noteText">
                <tspan x="316">If the user has no</tspan>
                <tspan dy="21" x="316">session for Qlik,</tspan>
                <tspan dy="21" x="316">your SaaS platform</tspan>
                <tspan dy="21" x="316">will request a</tspan>
                <tspan dy="21" x="316">ticket containing</tspan>
                <tspan dy="21" x="316">the userID and</tspan>
                <tspan dy="21" x="316">groups.</tspan>
            </text>
        </g>
        <g>
            <text x="375" y="335" class="messageText" style="text-anchor: middle;">JSON Response</text>
            <line x1="475" y1="342" x2="275" y2="342" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line>
        </g>
        <g>
            <rect x="500" y="352" fill="#EDF2AE" stroke="#666" width="150" height="120" rx="0" ry="0" class="note"></rect>
            <text x="516" y="380" fill="black" class="noteText">
                <tspan x="516">Sense only returns</tspan>
                <tspan dy="21" x="516">authorized</tspan>
                <tspan dy="21" x="516">resources and data</tspan>
                <tspan dy="21" x="516">for the groups of</tspan>
                <tspan dy="21" x="516">the user.</tspan>
            </text>
        </g>
        <g>
            <text x="175" y="500" class="messageText" style="text-anchor: middle;">Embedded page</text>
            <line x1="275" y1="507" x2="75" y2="507" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line>
        </g>
        <g>
            <rect x="0" y="527" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect>
            <text x="75" y="564.5" class="actor" style="text-anchor: middle;">User</text>
        </g>
        <g>
            <rect x="200" y="527" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect>
            <text x="275" y="564.5" class="actor" style="text-anchor: middle;">Your SaaS platform</text>
        </g>
        <g>
            <rect x="400" y="527" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect>
            <text x="475" y="564.5" class="actor" style="text-anchor: middle;">Qlik Sense</text>
        </g>
    </svg>
    <h4>Web integration</h4>
    <p>You can integrate the Qlik Sense hub, apps, sheets or individual objects using an Iframe or DIV tag. All functionality is delivered via a webserver called the proxy (QPS). The QPS also performs the authentication check, and redirects the user to your SaaS platform to request the ticket if not yet authenticated via a session cookie.
        <div class="ui mini buttons">
            <!-- <a href="http://knsv.github.io/mermaid/live_editor/#/view/c2VxdWVuY2VEaWFncmFtClVzZXItPj5Zb3VyIFNhYVMgcGxhdGZvcm06IGJyb3dzZSAKWW91ciBTYWFTIHBsYXRmb3JtLT4-IFFsaWsgU2Vuc2U6IEdldCBkYXRhL2NoYXJ0cwpOb3RlIHJpZ2h0IG9mIFlvdXIgU2FhUyBwbGF0Zm9ybTpJZiB0aGUgdXNlciBoYXMgbm8gc2Vzc2lvbiBmb3IgUWxpaywgeW91ciBTYWFTIHBsYXRmb3JtIHdpbGwgcmVxdWVzdCBhIHRpY2tldCBjb250YWluaW5nIHRoZSB1c2VySUQgYW5kIGdyb3Vwcy4KUWxpayBTZW5zZS0tPj5Zb3VyIFNhYVMgcGxhdGZvcm06IEpTT04gUmVzcG9uc2UKTm90ZSByaWdodCBvZiBRbGlrIFNlbnNlOlNlbnNlIG9ubHkgcmV0dXJucyBhdXRob3JpemVkIHJlc291cmNlcyBhbmQgZGF0YSBmb3IgdGhlIGdyb3VwcyBvZiB0aGUgdXNlci4KWW91ciBTYWFTIHBsYXRmb3JtLS0-PlVzZXI6IEVtYmVkZGVkIHBhZ2U" class="ui button">Simple sequence diagram</a>
        <div class="or"></div> -->
            <a class="ui button" href="/images/QlikSense%20TopologiesV0_18.pdf" target="_blank">Topology sheet</a>
        </div>
    </p>
    <div class="ui divider"></div>
    <h4>Data integration</h4>
    <img class="ui large centered image" src="images/dataIntegrationIntro.png">
    <p></p>
    <p>A powerful <a href="http://www.qlik.com/us/products/data-sources">data integration capability</a> for cleansing, transforming, and unifying multiple, disparate data sources for analysis. A robust data integration layer creates a unified view of information from many different sources, without requiring external tools or data repositories.
    </p>
    <p>
        In the demo we’ve assumed you have a database per customer instance and you also have a master database which contains the customers, the database connections, user rights and possibly customer specific custom tables and fields.
    </p>
    <div class="ui divider"></div>
    <!-- <img class="ui tiny right floated image" src="images/id.png"> -->
    <h4>Security integration</h4>
    <p>Actually you don't need to do so much on the security side. You don't create users or groups in Sense. You just supply the userID and group membership in the security ticket. Based on the info in the ticket access is provided. Resources are protected using the <a href="https://help.qlik.com/en-US/sense/3.1/Subsystems/ManagementConsole/Content/property-based-access-control.htm">security rules</a>, data filtering inside an app is enforced using <a href="https://help.qlik.com/en-US/sense/3.1/Subsystems/Hub/Content/Scripting/Security/manage-security-with-section-access.htm">"section access"</a>.</p>
    <div class="ui divider"></div>
    <h4>API - Process integration</h4>
    <p>In the demo you will see the broker in action. But what are the activities that the SaaS broker automates in the demo? What are the steps or stages?</p>
    <ul>
        <li>First it will create a stream for each customer. </li>
        <li>Secondly it will copy the template app. </li>
        <li>Next it replaces the script with a customer-specific one, or in most cases you just have to replace the database connection.</li>
        <li>Using the new script, the app is reloaded. You can also use this mechanism to query big data sources like MongoDB. This is where we basically make a compressed copy of the data and create the associative model.</li>
        <li>In the final stage we publish the app in the stream with the name of the customer.</li>
    </ul>
</template>
<template name="introVideoArchitecture">
    <h4 class="ui header">Integrated architecture (3M)</h4>
    <div class="ui embed" data-url="{{URL_Youtube_architecture_introduction}}" data-placeholder="/images/integratedArchitecture.png"></div>
    <div class="item">
        <div class="content">
            <a class="header">Contents</a>
            <div class="meta">
                <span></span>
            </div>
            <div class="description">
                <p>Let’s review the Qlik Sense architecture integration considerations at a high level. </p>
            </div>
            <div class="extra">
                <ul>
                    <li>What are the key compononents of Qlik Sense?</li>
                    <li>How can you load data?</li>
                    <li>How can you connect to the Qlik Sense Hub and management console (QMC)? </li>
                    <li>Authentication integration and use of APIs</li>
                </ul>
            </div>
        </div>
    </div>
</template>
<template name="introVideoArchitectureMike">
    <h4 class="ui header">Introduction architecture (5M)</h4>
    <div class="ui embed" data-url="https://www.youtube.com/embed/4w5mMar5o-M"></div>
    <div class="item">
        <div class="content">
            <a class="header">Contents</a>
            <div class="meta">
                <span></span>
            </div>
            <div class="description">
                <p>This video presents a brief overview of the Qlik Sense platform architecture.</p>
            </div>
        </div>
    </div>
</template>
<template name="introVideoArchitectureMarcus">
    <h4 class="ui header">Scalability (9M)</h4>
    <div class="ui embed" data-url="https://www.youtube.com/embed/XZx9nKLR4ps"></div>
    <div class="item">
        <div class="content">
            <a class="header">Contents</a>
            <div class="meta">
                <span></span>
            </div>
            <div class="description">
                <p>Marcus Spitzmiller, Master Principal Enterprise Architect, presents this high level presentation which is targeted toward technical leaders (IT, BI) that need to understand how the capabilities within Qlik Sense enable visual analytics to be scaled within an organization.</p>
            </div>
        </div>
    </div>
</template>
